@*@model iWasHere.Domain.DTOs.DictionaryLanguageModel;

    @{
        ViewData["Title"] = "LanguageAdd";
        Layout = "~/Views/Shared/_Layout.cshtml";
    }

    <h1>Add Language</h1>

    <script>

        let fromUpdate = false;

        function AddLanguage() {
            var url_string = window.location.href;
            var url = new URL(url_string);
            var id = url.searchParams.get("id");
            if (id != 0) {
                $.ajax({
                type: 'POST',
                url: '@Url.Action("EditLanguage", "DictionaryLanguage")',
                    data: {
                        lgCode: document.getElementById("LanguageCode").value,
                        lgName: document.getElementById("LanguageName").value,
                        lgId: document.getElementById("LanguageId").value
                },
                success: function (response) {

                     window.location.href = '@Url.Action("Index", "DictionaryLanguage")';
                },
                error: function (response) {
                    //alert("hai ca nu merge");
                }
            })
            }
            else {
                $.ajax({
                type: 'PUT',
                url: '@Url.Action("SaveLanguage", "DictionaryLanguage")',
                data: {
                    lgCode: document.getElementById("LanguageCode").value,
                    lgName: document.getElementById("LanguageName").value,
                    lgId: document.getElementById("LanguageId").value

                },
                    success: function (response) {
                        if (fromUpdate) {
                            document.getElementById("LanguageCode").value = "";
                            document.getElementById("LanguageName").value = "";
                            document.getElementById("LanguageId").value = "";
                            fromUpdate = false;
                        }
                        else {
                            window.location.href = '@Url.Action("Index", "DictionaryLanguage")';
                        }

                },
                error: function (response) {
                    //alert("hai ca nu merge");
                }
            })
            }

        }

        function onLoadEdit() {

            var url_string = window.location.href;
            var url = new URL(url_string);
            document.getElementById("LanguageId").style.visibility = "hidden";

            var id = url.searchParams.get("id");
            if (id != 0) {
                alert("din edit");
                alert(id);
                      document.getElementById("buttonId").innerText = "Update";
            }
            else {
                alert("din add");
            }

        }

        function cancelAdd() {
            window.location.href = '@Url.Action("Index", "DictionaryLanguage")';
        }




        function AddNew() {
            fromUpdate = true;
            AddLanguage();
        }

    </script>

    <body onload="onLoadEdit()">

        <div class="form-group">


            @(Html.Kendo().TextBoxFor(model => model.LanguageCode)
                 .HtmlAttributes(new { style = "width: 25%" })
            )

            @(Html.Kendo().TextBoxFor(model => model.LanguageName)
               .HtmlAttributes(new { style = "width: 25%" })
            )

            @(Html.Kendo().TextBoxFor(model => model.LanguageId)
               .HtmlAttributes(new { style = "width: 25%" })
            )

            <div>
                @(Html.Kendo().Button()
                          .Name("primaryTextButton")
                          .HtmlAttributes(new { type = "button", @class = "k-primary", @id = "buttonId", style = "margin:10px" })
                          .Content("Add")
                          .Events(ev => ev.Click("AddLanguage"))
                )
                @(Html.Kendo().Button()
                  .Name("addNewButton")
                  .HtmlAttributes(new { type = "button", @class = "k-primary" })
                  .Content("Add New")
                  .Events(ev => ev.Click("AddNew"))
                )
                @(Html.Kendo().Button()
                      .Name("cancelButton")
                      .HtmlAttributes(new { type = "button", @class = "k-primary" })
                      .Content("Cancel")
                      .Events(ev => ev.Click("cancelAdd"))
                )
            </div>

        </div>

    </body>*@





@{

    ViewData["Title"] = "AddLanguage";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<h1>AddLanguage</h1>
<script>
    let fromUpdate = false;

    function AddLanguage() {
        var url_string = window.location.href;
        var url = new URL(url_string);
        var id = url.searchParams.get("id");
        var cityNameValidation = false;
        if (document.getElementById("languageName").value == "" || document.getElementById("languageCode").value == "") {
            alert("Camp gol");
        }
        else {
            $.ajax({
                type: 'GET',
                url: '@Url.Action("VerifyLanguage", "DictionaryLanguage")',
                data: {
                    languageName: document.getElementById("languageName").value,
                    languageCode: document.getElementById("languageCode").value,
                },
                success: function (response) {
                    cityNameValidation = response;
                    alert(cityNameValidation);
                    if (id != 0) {
                        
                            $.ajax({
                                type: 'POST',
                                url: '@Url.Action("EditLanguage", "DictionaryLanguage")',
                                data: {
                                    langName: document.getElementById("languageName").value,
                                    langCode: document.getElementById("languageCode").value,
                                    langId: document.getElementById("languageId").value

                                },
                                success: function (response) {

                                    window.location.href = '@Url.Action("Index", "DictionaryLanguage")';
                                },
                                error: function (response) {
                                    //  alert("hai ca nu merge");
                                }
                            })
                        
                    }
                    else {
                        if (!cityNameValidation) {
                            $.ajax({
                                type: 'PUT',
                                url: '@Url.Action("SaveLanguage", "DictionaryLanguage")',
                                data: {
                                    langName: document.getElementById("languageName").value,
                                    langCode: document.getElementById("languageCode").value,

                                },
                                success: function (response) {
                                    if (fromUpdate) {
                                        document.getElementById("languageName").value = "";
                                        document.getElementById("languageCode").value = "";
                                        fromUpdate = false;
                                    }
                                    else {
                                        window.location.href = '@Url.Action("Index", "DictionaryLanguage")';
                                    }

                                },
                                error: function (response) {
                                    //  alert("hai ca nu merge");
                                }
                            })
                        } else {
                            alert("This language already exists");
                        }
                    }
                },
                error: function (response) {
                    // alert("hai ca nu merge");
                }
            })
        }
    }

    function onLoadEdit() {

        var url_string = window.location.href;
        var url = new URL(url_string);
        document.getElementById("languageId").style.visibility = "hidden";

        var id = url.searchParams.get("id");
        if (id != 0) {
            //alert("din edit");
            document.getElementById("buttonId").innerText = "Update";
            document.getElementById("buttonIdNew").style.visibility = "hidden";
        }
        else {
            //alert("din add");
        }

    }

    function cancelAdd() {
        window.location.href = '@Url.Action("Index", "DictionaryLanguage")';
    }




    function AddNew() {
        fromUpdate = true;
        AddLanguage();
       // window.location.href = 'Url.Action("AddCity", "DictionaryCity")';


    }


</script>
@model iWasHere.Domain.DTOs.DictionaryLanguageModel;

<body onload="onLoadEdit()">


    <ul style="list-style-type:none">
        <li>

            <label>Language Code</label>

        </li>
        <li>
            @(Html.Kendo().TextBoxFor(model => model.LanguageCode)
                                .HtmlAttributes(new { @id = "languageCode", style = "margin:10px" })

            )
            @(Html.Kendo().TextBoxFor(model => model.LanguageId)
                .HtmlAttributes(new { @id = "languageId", style = "margin:10px" })
            )
        </li>
        <li>

            <label>Language Name</label>


        </li>
        <li>
            @(Html.Kendo().TextBoxFor(model => model.LanguageName)
                .HtmlAttributes(new { @id = "languageName", style = "margin:10px" })
            )
        </li>
    </ul>




    <div>
        @(Html.Kendo().Button()
                  .Name("primaryTextButton")
                  .HtmlAttributes(new { type = "button", @class = "k-primary", @id = "buttonId", style = "margin:10px" })
                  .Content("Add")
                  .Events(ev => ev.Click("AddLanguage"))
        )
        @(Html.Kendo().Button()
          .Name("addNewButton")
          .HtmlAttributes(new { type = "button", @class = "k-primary", @id = "buttonIdNew" })
          .Content("Add New")
          .Events(ev => ev.Click("AddNew"))
        )
        @(Html.Kendo().Button()
              .Name("cancelButton")
              .HtmlAttributes(new { type = "button", @class = "k-primary" })
              .Content("Cancel")
              .Events(ev => ev.Click("cancelAdd"))
        )
    </div>


</body>